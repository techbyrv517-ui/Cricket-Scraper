{% extends 'admin.html' %}

{% block main_content %}
<div class="content-header">
    <h1>Edit Matchup: {{ matchup.title }}</h1>
    <a href="{{ url_for('admin_matchups') }}" class="btn btn-secondary">Back to Matchups</a>
</div>

<div class="card">
    <form method="POST" class="post-form">
        <div class="form-section">
            <h3>Matchup Information</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="title">Title *</label>
                    <input type="text" id="title" name="title" value="{{ matchup.title }}" required>
                </div>
                
                <div class="form-group">
                    <label for="link_url">Link URL</label>
                    <input type="text" id="link_url" name="link_url" value="{{ matchup.link_url or '' }}">
                </div>
                
                <div class="form-group full-width">
                    <label for="short_description">Short Description</label>
                    <input type="text" id="short_description" name="short_description" value="{{ matchup.short_description or '' }}">
                </div>
                
                <div class="form-group">
                    <label for="color1">Color 1 (Left)</label>
                    <input type="color" id="color1" name="color1" value="{{ matchup.color1 or '#FF9933' }}">
                </div>
                
                <div class="form-group">
                    <label for="color2">Color 2 (Right)</label>
                    <input type="color" id="color2" name="color2" value="{{ matchup.color2 or '#046A38' }}">
                </div>
                
                <div class="form-group">
                    <label for="display_order">Display Order</label>
                    <input type="number" id="display_order" name="display_order" value="{{ matchup.display_order or 0 }}" min="0">
                </div>
                
                <div class="form-group">
                    <label for="image_url">Image URL (Optional)</label>
                    <input type="url" id="image_url" name="image_url" value="{{ matchup.image_url or '' }}">
                </div>
            </div>
        </div>
        
        <div class="form-section">
            <h3>Content (Rich Editor)</h3>
            <div class="form-group">
                <textarea id="content" name="content" rows="15">{{ matchup.content or '' }}</textarea>
            </div>
        </div>
        
        <div class="form-section">
            <h3>SEO Settings</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="focus_keyword">Focus Keyword</label>
                    <input type="text" id="focus_keyword" name="focus_keyword" value="{{ matchup.focus_keyword or '' }}">
                </div>
                
                <div class="form-group">
                    <label for="meta_title">Meta Title</label>
                    <input type="text" id="meta_title" name="meta_title" value="{{ matchup.meta_title or '' }}" maxlength="70">
                    <small id="meta_title_count">{{ (matchup.meta_title|length) if matchup.meta_title else 0 }}/70 characters</small>
                </div>
                
                <div class="form-group full-width">
                    <label for="meta_description">Meta Description</label>
                    <textarea id="meta_description" name="meta_description" rows="2" maxlength="170">{{ matchup.meta_description or '' }}</textarea>
                    <small id="meta_desc_count">{{ (matchup.meta_description|length) if matchup.meta_description else 0 }}/170 characters</small>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" name="is_published" {{ 'checked' if matchup.is_published else '' }}>
                        <span>Published</span>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Update Matchup</button>
            <a href="{{ url_for('admin_matchups') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js"></script>
<script>
tinymce.init({
    selector: '#content',
    height: 400,
    menubar: true,
    plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
    toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
    content_style: 'body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; font-size: 14px; }',
    license_key: 'gpl'
});

document.getElementById('meta_title').addEventListener('input', function() {
    document.getElementById('meta_title_count').textContent = this.value.length + '/70 characters';
});
document.getElementById('meta_description').addEventListener('input', function() {
    document.getElementById('meta_desc_count').textContent = this.value.length + '/170 characters';
});
</script>

<style>
.post-form { max-width: 100%; }
.form-section { margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
.form-section h3 { margin-bottom: 20px; color: #333; font-size: 18px; }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.form-grid .full-width { grid-column: 1 / -1; }
.form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
.form-group input, .form-group textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
.form-group input[type="color"] { height: 42px; padding: 5px; }
.form-group small { color: #666; font-size: 12px; margin-top: 4px; display: block; }
.checkbox-label { display: flex; align-items: center; gap: 8px; cursor: pointer; }
.form-actions { display: flex; gap: 10px; margin-top: 20px; }
.content-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
@media (max-width: 768px) { .form-grid { grid-template-columns: 1fr; } }
</style>
{% endblock %}
